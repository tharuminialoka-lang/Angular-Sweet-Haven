<section class="featured-section py-5 bg-light" id="featured-sweets">
  <div class="container">
    <div class="text-center1 mb-5">
      <h2 class="section-title display-5 fw-bold text-dark mb-3">{{ sectionTitle }}</h2>
      <p class="section-subtitle lead text-muted">{{ sectionSubtitle }}</p>
      
      <!-- Category Filter Info -->
      <div class="filter-info mb-4">
        <div class="alert alert-info d-inline-flex align-items-center" role="alert">
          <i class="fas fa-filter me-2"></i>
          <span class="fw-semibold">Showing:</span>
          &nbsp;
          <span class="badge bg-primary ms-2">{{ getCategoryDisplayName() }}</span>
          &nbsp;
          <span class="ms-2">({{ getFilteredSweetsCount() }} items)</span>
        </div>
        
        <!-- Quick Category Filter Buttons -->
        <div class="quick-filter mt-3">
          <small class="text-muted d-block mb-2">Quick filter:</small>
          <button class="btn btn-sm btn-outline-secondary mx-1 mb-1" 
                  [class.btn-primary]="currentCategory === 'all'"
                  [class.text-white]="currentCategory === 'all'"
                  (click)="selectCategory('all')">
            All
          </button>
          <button *ngFor="let cat of categories" 
                  class="btn btn-sm btn-outline-secondary mx-1 mb-1"
                  [class.btn-primary]="currentCategory === cat.type"
                  [class.text-white]="currentCategory === cat.type"
                  (click)="selectCategory(cat.type)">
            {{ cat.name }}
          </button>
        </div>
      </div>
    </div>
    
    <!-- Category Description -->
    <div class="row mb-4" *ngIf="currentCategory !== 'all'">
      <div class="col-12">
        <div class="category-description-card p-4 bg-white rounded-3 shadow-sm">
          <h5 class="text-primary mb-2">üéØ {{ getCategoryDisplayName() }} Collection</h5>
          <p class="text-muted mb-0">{{ getCategoryDescription() }}</p>
        </div>
      </div>
    </div>
    
    <!-- Sweets Grid -->
    <div class="row g-4" *ngIf="featuredItems.length > 0">
      <div class="col-lg-4 col-md-6" *ngFor="let item of featuredItems">
        <div class="sweet-card card h-100 border-0 shadow-sm" (click)="viewProductDetails(item)">
          <div class="sweet-image-container position-relative">
            <img [src]="item.image" class="card-img-top" [alt]="item.name" 
                 style="height: 250px; object-fit: cover; cursor: pointer;">
            <div class="category-badge position-absolute top-0 end-0 m-3">
              <span class="badge bg-primary text-capitalize">{{ item.category }}</span>
            </div>
          </div>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title fw-bold text-dark" style="cursor: pointer;">{{ item.name }}</h5>
            <p class="card-text text-muted flex-grow-1">{{ item.description }}</p>
            <div class="d-flex justify-content-between align-items-center mt-auto">
              <span class="h4 text-primary fw-bold mb-0">LKR.{{ item.price }}</span>
              <button class="btn btn-primary px-4" (click)="$event.stopPropagation(); addToCart(item)">
                üõí Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
     <div class="row">
    <div *ngFor="let sweet of featuredSweets" class="col-md-4 mb-4">
      <div class="card sweet-card h-100 position-relative">
        <!-- Heart Icon -->
        <button class="btn-favorite" (click)="toggleFavorite(sweet)">
          <i class="fas" [class.fa-heart]="sweet.isFavorite" [class.fa-heart]="!sweet.isFavorite"></i>
        </button>
        
        <img [src]="sweet.image" class="card-img-top" [alt]="sweet.name">
        <div class="card-body">
          <h5 class="card-title">{{ sweet.name }}</h5>
          <p class="card-text">{{ sweet.description }}</p>
          <div class="d-flex justify-content-between align-items-center">
            <span class="price">LKR.{{ sweet.price }}</span>
            <button class="btn btn-primary">Add to Cart</button>
          </div>
        </div>
      </div>
    </div>
  </div>
    <!-- No Items Message -->
    <div class="text-center py-5" *ngIf="featuredItems.length === 0">
      <div class="empty-state">
        <i class="fas fa-cookie-bite display-1 text-muted mb-3"></i>
        <h4 class="text-muted">No sweets found in "{{ getCategoryDisplayName() }}" category</h4>
        <p class="text-muted mb-4">Try selecting a different category or browse all sweets.</p>
        <button class="btn btn-primary btn-lg" (click)="selectCategory('all')">
          üç≠ Show All Sweets
        </button>
      </div>
    </div>  
  </div>
</section>

<!-- Simple Product Detail Modal -->
<div class="product-detail-overlay" *ngIf="showProductDetail && selectedProduct" (click)="closeProductDetail()">
  <div class="product-detail-modal" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeProductDetail()">
      <i class="fas fa-times"></i>
    </button>
    
    <div class="product-detail-content">
      <!-- Product Image -->
      <div class="product-image">
        <img [src]="selectedProduct.image" [alt]="selectedProduct.name" class="main-image">
      </div>
      
      <!-- Product Info -->
      <div class="product-info">
        <div class="product-header">
          <h1 class="product-name">{{ selectedProduct.name }}</h1>
          <span class="product-category">{{ selectedProduct.category }}</span>
        </div>
        
        <p class="product-description">{{ selectedProduct.description }}</p>
        
        <div class="product-price">
          <span class="price">LKR {{ selectedProduct.price }}</span>
        </div>

        <!-- Ingredients List -->
        <div class="info-section">
          <h3><i class="fas fa-list-ul me-2"></i>Ingredients</h3>
          <div class="ingredients-list">
            <span class="ingredient-tag" *ngFor="let ingredient of getIngredients(selectedProduct)">{{ ingredient }}</span>
          </div>
        </div>

        <!-- Nutrition Information -->
        <div class="info-section">
          <h3><i class="fas fa-chart-pie me-2"></i>Nutrition Information</h3>
          <div class="nutrition-grid">
            <div class="nutrition-item">
              <span class="nutrition-label">Calories</span>
              <span class="nutrition-value">{{ getNutritionInfo(selectedProduct).calories }}</span>
            </div>
            <div class="nutrition-item">
              <span class="nutrition-label">Protein</span>
              <span class="nutrition-value">{{ getNutritionInfo(selectedProduct).protein }}</span>
            </div>
            <div class="nutrition-item">
              <span class="nutrition-label">Carbohydrates</span>
              <span class="nutrition-value">{{ getNutritionInfo(selectedProduct).carbs }}</span>
            </div>
            <div class="nutrition-item">
              <span class="nutrition-label">Fat</span>
              <span class="nutrition-value">{{ getNutritionInfo(selectedProduct).fat }}</span>
            </div>
          </div>
        </div>

        <!-- General Information -->
        <div class="info-section">
          <h3><i class="fas fa-info-circle me-2"></i>About This Sweet</h3>
          <p class="info-text">This delicious {{ selectedProduct.name.toLowerCase() }} is carefully crafted with premium ingredients to deliver an unforgettable taste experience. Perfect for satisfying your sweet cravings and making any moment special.</p>
        </div>

        <!-- Features List -->
        <div class="features-section">
          <h3><i class="fas fa-star me-2"></i>Why You'll Love It</h3>
          <ul class="features-list">
            <li>Made with premium quality ingredients</li>
            <li>Freshly prepared for optimal taste</li>
            <li>Perfect sweetness balance</li>
            <li>Great for all occasions</li>
            <li>Handcrafted with care</li>
          </ul>
        </div>

        <!-- Customer Reviews -->
        <div class="reviews-section">
          <h3><i class="fas fa-comments me-2"></i>Customer Reviews</h3>
          <div class="reviews-list">
            <div class="review-item" *ngFor="let review of getReviews(selectedProduct)">
              <div class="review-header">
                <span class="reviewer-name">{{ review.userName }}</span>
                <div class="review-rating">
                  <i class="fas fa-star" *ngFor="let star of [1,2,3,4,5]" 
                      [class.filled]="star <= review.rating"></i>
                </div>
              </div>
              <p class="review-comment">{{ review.comment }}</p>
              <span class="review-date">{{ review.date }}</span>
            </div>
          </div>
          <div class="no-reviews" *ngIf="getReviews(selectedProduct).length === 0">
            <p class="text-muted">No reviews yet. Be the first to review this product!</p>
          </div>
        </div>
        
        <button class="add-to-cart-btn" (click)="addToCartFromDetail(selectedProduct)">
          <i class="fas fa-shopping-cart"></i>
          Add to Cart
        </button>
      </div>
    </div>
  </div>
</div>